<!-- daily-operations.component.html -->
<div class="daily-operations-page">
  <!-- En-t√™te -->
  <header class="page-header">
    <div class="header-content">
      <div class="title-section">
        <h1>Demandes d'op√©rations</h1>
        <span class="subtitle">G√©rez les op√©rations de vos clients</span>
      </div>

      <div class="actions-section">
        <button class="refresh-btn" (click)="refreshData()">
          <i class="refresh-icon">üîÑ</i>
          Actualiser
        </button>
      </div>
    </div>
  </header>

  <!-- Contenu principal -->
  <main class="page-content">
    <!-- Section des filtres -->
    <section class="filters-section" *ngIf="showFilters">
      <div class="filters-container">
        <!-- Filtre par statut -->
        <div class="filter-group">
          <label>Statut</label>
          <select [(ngModel)]="statusFilter" (change)="applyFilters()">
            <option value="">Tous</option>
            <option *ngFor="let status of statusOptions" [value]="status">
              {{ status }}
            </option>
          </select>
        </div>

        <!-- Filtre par priorit√© -->
        <div class="filter-group">
          <label>Priorit√©</label>
          <select [(ngModel)]="priorityFilter" (change)="applyFilters()">
            <option value="">Toutes</option>
            <option *ngFor="let priority of priorityOptions" [value]="priority">
              {{ priority }}
            </option>
          </select>
        </div>

        <!-- Filtre par cat√©gorie -->
        <div class="filter-group">
          <label>Cat√©gorie</label>
          <select [(ngModel)]="categoryFilter" (change)="applyFilters()">
            <option value="">Toutes</option>
            <option *ngFor="let category of categoryOptions" [value]="category">
              {{ category }}
            </option>
          </select>
        </div>

        <!-- S√©lection de la p√©riode -->
        <div class="filter-group date-range">
          <label>P√©riode</label>
          <div class="date-inputs">
            <input
              type="date"
              [(ngModel)]="dateRange.start"
              (change)="applyFilters()"
            >
            <span>√†</span>
            <input
              type="date"
              [(ngModel)]="dateRange.end"
              (change)="applyFilters()"
            >
          </div>
        </div>
      </div>

      <div class="filters-actions">
        <button class="reset-btn" (click)="resetFilters()">
          R√©initialiser les filtres
        </button>
      </div>
    </section>

    <!-- Templates personnalis√©s pour le tableau -->
    <ng-template #statusTemplate let-value>
      <span class="status-badge" [ngClass]="'status-' + value.toLowerCase().replace(' ', '-')">
        {{ value }}
      </span>
    </ng-template>

    <ng-template #priorityTemplate let-value>
      <span class="priority-badge" [ngClass]="'priority-' + value.toLowerCase().replace(' ', '-')">
        {{ value }}
      </span>
    </ng-template>

    <!-- Tableau des op√©rations -->
    <section class="table-section">
      <shared-table
        [columns]="columns"
        [data]="filteredOperations"
        [options]="tableOptions"
        (edit)="onEdit($event)"
        (delete)="onDelete($event)"
        (rowDblClick)="onRowDoubleClick($event)"
      ></shared-table>
    </section>
  </main>
</div>

<!-- Modal de traitement d'op√©ration -->
<app-daily-operation-modal
  *ngIf="selectedOperation"
  [operation]="selectedOperation"
  (close)="selectedOperation = null"
  (update)="onOperationUpdate($event)"
></app-daily-operation-modal>

<!-- Notifications -->
<app-notification-toast></app-notification-toast>
